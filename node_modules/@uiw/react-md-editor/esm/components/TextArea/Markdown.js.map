{
  "version": 3,
  "sources": [
    "../../../src/components/TextArea/Markdown.tsx"
  ],
  "names": [
    "React",
    "useContext",
    "useEffect",
    "useMemo",
    "rehype",
    "rehypePrism",
    "EditorContext",
    "Markdown",
    "props",
    "prefixCls",
    "markdown",
    "highlightEnable",
    "dispatch",
    "preRef",
    "createRef",
    "current",
    "textareaPre",
    "html2Escape",
    "sHtml",
    "replace",
    "str",
    "c",
    "data",
    "fragment",
    "use",
    "ignoreMissing",
    "processSync",
    "createElement",
    "className",
    "dangerouslySetInnerHTML",
    "__html",
    "value"
  ],
  "mappings": "AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,SAASC,MAAT,QAAuB,QAAvB,C,CACA;;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AAEA,SAASC,aAAT,QAA8B,eAA9B;;AAIA,eAAe,SAASC,QAAT,CAAkBC,KAAlB,EAAwC;AACrD,MAAQC,SAAR,GAAsBD,KAAtB,CAAQC,SAAR;;AACA,oBAAqDR,UAAU,CAACK,aAAD,CAA/D;AAAA,yCAAQI,QAAR;AAAA,MAAQA,QAAR,qCAAmB,EAAnB;AAAA,MAAuBC,eAAvB,eAAuBA,eAAvB;AAAA,MAAwCC,QAAxC,eAAwCA,QAAxC;;AACA,MAAMC,MAAM,gBAAGb,KAAK,CAACc,SAAN,EAAf;AACAZ,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIW,MAAM,CAACE,OAAP,IAAkBH,QAAtB,EAAgC;AAC9BA,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,WAAW,EAAEH,MAAM,CAACE;AAAtB,OAAD,CAAR;AACD,KAHa,CAId;;AACD,GALQ,EAKN,EALM,CAAT;;AAMA,WAASE,WAAT,CAAqBC,KAArB,EAAoC;AAClC,WAAOA,KAAK,CACTC,OADI,CACI,iCADJ,EACuC,UAACC,GAAD,EAAiB;AAC3D,aAAOA,GAAG,CAACD,OAAJ,CACL,SADK,EAEL,UAACE,CAAD;AAAA,eAAiB;AAAE,eAAK,MAAP;AAAe,eAAK,MAApB;AAA4B,eAAK,OAAjC;AAA0C,eAAK;AAA/C,SAAD,CAAsFA,CAAtF,CAAhB;AAAA,OAFK,CAAP;AAID,KANI,EAOJF,OAPI,CAQH,SARG,EASH,UAACE,CAAD;AAAA,aAAiB;AAAE,aAAK,MAAP;AAAe,aAAK,MAApB;AAA4B,aAAK,OAAjC;AAA0C,aAAK;AAA/C,OAAD,CAAsFA,CAAtF,CAAhB;AAAA,KATG,CAAP;AAWD;;AAED,SAAOlB,OAAO,CAAC,YAAM;AACnB,QAAI,CAACQ,eAAD,IAAoB,CAACD,QAAzB,EAAmC;AACjC,0BAAO;AAAK,QAAA,QAAQ,EAAEA,QAAQ,IAAI,EAA3B;AAA+B,QAAA,GAAG,EAAEG,MAApC;AAA4C,QAAA,SAAS,EAAKJ,SAAL;AAArD,QAAP;AACD;;AACD,QAAMW,GAAG,GAAGhB,MAAM,GACfkB,IADS,CACJ,UADI,EACQ;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KADR,EAETC,GAFS,CAELnB,WAFK,EAEQ;AAAEoB,MAAAA,aAAa,EAAE;AAAjB,KAFR,EAGTC,WAHS,qCAIyBjB,SAJzB,0EAIoGQ,WAAW,CACrHP,QADqH,CAJ/G,mBAAZ;AAQA,wBAAOV,KAAK,CAAC2B,aAAN,CAAoB,KAApB,EAA2B;AAChCC,MAAAA,SAAS,EAAE,qBADqB;AAEhCC,MAAAA,uBAAuB,EAAE;AAAEC,QAAAA,MAAM,EAAEV,GAAG,CAACW;AAAd;AAFO,KAA3B,CAAP;AAID,GAhBa,EAgBX,CAACpB,eAAD,EAAkBD,QAAlB,EAA4BG,MAA5B,EAAoCJ,SAApC,CAhBW,CAAd;AAiBD",
  "sourcesContent": [
    "import React, { useContext, useEffect, useMemo } from 'react';\nimport { rehype } from 'rehype';\n// @ts-ignore\nimport rehypePrism from '@mapbox/rehype-prism';\nimport { IProps } from '../../utils';\nimport { EditorContext } from '../../Context';\n\nexport interface MarkdownProps extends IProps, React.HTMLAttributes<HTMLPreElement> {}\n\nexport default function Markdown(props: MarkdownProps) {\n  const { prefixCls } = props;\n  const { markdown = '', highlightEnable, dispatch } = useContext(EditorContext);\n  const preRef = React.createRef<HTMLPreElement>();\n  useEffect(() => {\n    if (preRef.current && dispatch) {\n      dispatch({ textareaPre: preRef.current });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  function html2Escape(sHtml: string) {\n    return sHtml\n      .replace(/```(.*)\\s+([\\s\\S]*?)(\\s.+)?```/g, (str: string) => {\n        return str.replace(\n          /[<>&\"]/g,\n          (c: string) => (({ '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' } as Record<string, string>)[c]),\n        );\n      })\n      .replace(\n        /[<>&\"]/g,\n        (c: string) => (({ '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' } as Record<string, string>)[c]),\n      );\n  }\n\n  return useMemo(() => {\n    if (!highlightEnable || !markdown) {\n      return <pre children={markdown || ''} ref={preRef} className={`${prefixCls}-text-pre wmde-markdown-color`} />;\n    }\n    const str = rehype()\n      .data('settings', { fragment: true })\n      .use(rehypePrism, { ignoreMissing: true })\n      .processSync(\n        `<pre class=\"language-markdown ${prefixCls}-text-pre wmde-markdown-color\"><code class=\"language-markdown\">${html2Escape(\n          markdown,\n        )}</code></pre>`,\n      );\n    return React.createElement('div', {\n      className: 'wmde-markdown-color',\n      dangerouslySetInnerHTML: { __html: str.value as string },\n    });\n  }, [highlightEnable, markdown, preRef, prefixCls]);\n}\n"
  ]
}
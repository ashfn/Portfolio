{"version":3,"file":"taos.js","mappings":"CAAA,WACE,MAAMA,EAAW,CAACC,EAAUC,KAC1B,IAAIC,GAAU,EACd,MAAO,KACAA,IACHF,IACAE,GAAU,EACVC,YAAW,IAAMD,GAAU,GAAOD,MAKlCG,EAAQC,IACNA,EAAQC,YAAcD,EAAQE,QAAQC,YACxCH,EAAQC,UAAYD,EAAQE,QAAQC,YAGpCC,EAASJ,GAAWA,EAAQC,UAAYD,EAAQC,UAAUI,WAAW,QAAS,IAE9EC,EAAcN,IACbA,EAAQC,UAAUM,SAAS,eAC9BP,EAAQE,QAAQC,UAAYH,EAAQC,UAAY,aAChDF,EAAMC,IAERA,EAAQC,WAAa,gCACrBG,EAAOJ,GAEA,CACLA,QAAAA,EACAQ,KAAiE,MAA3DC,iBAAiBT,GAAS,+BAIpC,IAAIU,EAAW,GACXC,EAAUC,OAAOD,QACjBE,EAAcD,OAAOE,WAEzB,MAAMC,EAAkBrB,GAAS,KAC/BgB,EAASM,SAAQC,IACfA,EAAGC,QAAUD,EAAGjB,QAAQmB,wBAAwBC,IAAMR,OAAOS,YAAcC,SAASL,EAAGjB,QAAQE,QAAQqB,YAAc,GAAKX,OAAOD,aAElI,KAEGa,EAAU,KACdd,EAAW,GACXe,SAASC,iBAAiB,mBAAmBV,SAAQhB,GAAWU,EAASiB,KAAKrB,EAAYN,MAC1Fe,IACAa,sBAAsBC,GACtBhB,EAAcD,OAAOE,YAGjBe,EAAe,KACnBlB,EAAUC,OAAOD,QACjBD,EAASM,SAAQ,EAAEhB,QAAAA,EAASkB,QAAAA,EAASV,KAAAA,MAC/BU,EAAUP,EACZZ,EAAMC,IAEEQ,GAAQR,EAAQC,UAAUM,SAAS,UAC3CH,EAAOJ,MAGXe,KAGFS,IACAM,iBAAiB,SAAUpC,EAASmC,EAAc,KAClDC,iBAAiB,oBAAqBN,GACtCM,iBAAiB,UAAU,KACrBlB,OAAOE,aAAeD,GAG1BW,OAGe,IAAIO,kBAAiBC,IACpCA,EAAUhB,SAAQ,EAAEiB,OAAAA,OACbA,EAAOhC,UAAUM,SAAS,cAAgB0B,EAAOhC,UAAUM,SAAS,UACvEG,EAASiB,KAAKrB,EAAY2B,UAIvBC,QAAQT,SAAU,CAACU,YAAY,EAAMC,WAAW,EAAMC,SAAS,IAjF1E","sources":["webpack:///./src/js/taos.js"],"sourcesContent":["(function() {\n  const throttle = (callback, limit) => {\n    let waiting = false\n    return () => {\n      if (!waiting) {\n        callback()\n        waiting = true\n        setTimeout(() => waiting = false, limit)\n      }\n    }\n  }\n\n  const reset = element => {\n      if (element.className !== element.dataset.taosClass) {\n        element.className = element.dataset.taosClass\n      }\n    }\n  const before = element => element.className = element.className.replaceAll('taos:', '')\n\n  const initElement = element => {\n    if (!element.className.includes('taos-init')) {\n      element.dataset.taosClass = element.className + ' taos-init'\n      reset(element)\n    }\n    element.className += ' !duration-[0ms] !delay-[0ms]'\n    before(element)\n\n    return {\n      element,\n      once: getComputedStyle(element)['animation-iteration-count'] === '1'\n    }\n  }\n\n  let elements = []\n  let scrollY = window.scrollY\n  let windowWidth = window.innerWidth\n\n  const refreshTriggers = throttle(() => {\n    elements.forEach(el => {\n      el.trigger = el.element.getBoundingClientRect().top - window.innerHeight + parseInt(el.element.dataset.taosOffset || 0) + window.scrollY\n    })\n  }, 250)\n\n  const refresh = () => {\n    elements = []\n    document.querySelectorAll('[class*=\"taos\"]').forEach(element => elements.push(initElement(element)))\n    refreshTriggers()\n    requestAnimationFrame(handleScroll)\n    windowWidth = window.innerWidth\n  }\n\n  const handleScroll = () => {\n    scrollY = window.scrollY\n    elements.forEach(({element, trigger, once}) => {\n      if (trigger < scrollY) {\n        reset(element)\n      }\n      else if (!once && element.className.includes('taos:')) {\n        before(element)\n      }\n    })\n    refreshTriggers()\n  }\n\n  refresh()\n  addEventListener('scroll', throttle(handleScroll, 32))\n  addEventListener('orientationchange', refresh)\n  addEventListener('resize', () => {\n    if (window.innerWidth === windowWidth) {\n      return;\n    }\n    refresh()\n  })\n\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(({target}) => {\n      if (!target.className.includes('taos-init') && target.className.includes('taos:')) {\n        elements.push(initElement(target))\n      }\n    })\n  })\n  observer.observe(document, {attributes: true, childList: true, subtree: true})\n})()\n"],"names":["throttle","callback","limit","waiting","setTimeout","reset","element","className","dataset","taosClass","before","replaceAll","initElement","includes","once","getComputedStyle","elements","scrollY","window","windowWidth","innerWidth","refreshTriggers","forEach","el","trigger","getBoundingClientRect","top","innerHeight","parseInt","taosOffset","refresh","document","querySelectorAll","push","requestAnimationFrame","handleScroll","addEventListener","MutationObserver","mutations","target","observe","attributes","childList","subtree"],"sourceRoot":""}